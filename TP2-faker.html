<html>

  <head>
    <title> TP2 </title>
    <script src="js/faker.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  </head>

  <body>
    <h1>
      <center>Homework - TP2 </center>
    </h1>
    <p>
      <center>Table of 50 fake rows</center>
    </p>
    <br/>
    <div id="mydiv"></div>
    <table class="table table-striped">
        <thead>
        <tr>
        <th onclick="sortbyname()"><button type="button" class="btn btn-default btn-block">Name</button></th>
        <th onclick="sortbylastname()"><button type="button" class="btn btn-default btn-block">Lastname</button></th>
        <th onclick="sortbyage()"><button type="button" class="btn btn-default btn-block">Age</button></th>
        <th onclick="sortbyjob()"><center><button type="button" class="btn btn-default btn-block">Job</button></center></th>
        <th onclick="sortbyaddress()"><button type="button" class="btn btn-default btn-block">Address</button></th>
        <th onclick="sortbyphone()"><button type="button" class="btn btn-default btn-block">Phone</button></th>
              </tr>
              </thead>
              <tbody id="tbody">
                
              </tbody>
    <script>

      var persons = new Array(50);
      var order = true;
      for (var i = 0; i < persons.length; i++) {
        persons[i] = {
          name: "",
          lastname: "",
          job: "",
          address: "",
          phone: "",
          age: ""
        };

        persons[i]["name"] = faker.name.firstName();
        persons[i]["lastname"] = faker.name.lastName();
        persons[i]["job"] = faker.name.jobTitle();
        persons[i]["address"] = faker.address.streetAddress() + ', ' + faker.address.city();
        persons[i]["phone"] = faker.phone.phoneNumber();
        persons[i]["age"] = Math.round(faker.random.number() / 1000);
      }

 renderTable()
    function renderTable(){
        var mytable ="";
        for (var j = 0; j < persons.length; j++) {
          mytable += "<tr>";
          mytable += "<td>" + persons[j]["name"] + "</td>";
          mytable += "<td>" + persons[j]["lastname"] + "</td>";
          mytable += "<td>" + persons[j]["age"] + "</td>";
          mytable += "<td>" + persons[j]["job"] + "</td>";
          mytable += "<td>" + persons[j]["address"] + "</td>";
          mytable += "<td>" + persons[j]["phone"] + "</td>";
          mytable += "</tr>";

        }
        document.getElementById("tbody").innerHTML = mytable;
      }
      

      // sorts
      function sortbyage() {
        if(order === true)
        {
           persons.sort(compare("age")); 
           order = false;
        }
        else 
        {
          persons.sort(compareDesc("age")); 
          order = true;
        }
        renderTable();
      }
      function sortbyname() {
        if(order === true)
        {
          persons.sort(compare("name")); 
          order = false;
        }
        else 
        {
          persons.sort(compareDesc("name")); 
          order = true;
        }
        renderTable();
      }
      function sortbylastname() {
        if(order === true)
        {
          persons.sort(compare("lastname")); 
          order = false;
        }
        else 
        {
          persons.sort(compareDesc("lastname")); 
          order = true;
        }
        renderTable();
      }
      function sortbyaddress() {
       if(order === true)
        {
          persons.sort(compare("address")); 
          order = false;
        }
        else 
        {
          persons.sort(compareDesc("address")); 
          order = true;
        }
        renderTable();
      }
      function sortbyjob() {
       if(order === true)
        {
          persons.sort(compare("job")); 
          order = false;
        }
        else 
        {
          persons.sort(compareDesc("job")); 
          order = true;
        }        renderTable();
      }
      function sortbyphone() {
        if(order === true)
        {
          persons.sort(compare("phone")); 
          order = false;
        }
        else 
        {
          persons.sort(compareDesc("phone")); 
          order = true;
        }        renderTable();
      }


      // helpers
      function compare(propName) {
        return function(a, b) {
          if (a[propName] < b[propName])
            return -1;
          if (a[propName] > b[propName])
            return 1;
          return 0;
        };
      }

      function compareDesc(propName) {
        return function(a, b) {
          if (a[propName] > b[propName])
            return -1;
          if (a[propName] < b[propName])
            return 1;
          return 0;
        };
      }

    </script>
  </body>

</html>
